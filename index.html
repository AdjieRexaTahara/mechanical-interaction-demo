<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Triple Beam Balance Simulation by Rexa</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            background-color: #f3f4f6;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            overflow: hidden;
            margin: 0;
            padding: 0;
            user-select: none;
        }
        #simulation-container {
            width: 100vw;
            height: 100vh;
            position: relative;
            background: linear-gradient(to bottom, #0d1b2a, #1e3a8a, #0d1b2a);
            overflow: hidden;
            touch-action: none;
        }
        .static-asset {
            position: absolute;
            pointer-events: none;
            object-fit: contain;
        }
        .draggable-object {
            position: absolute;
            cursor: grab;
            transition: width 0.2s ease, height 0.2s ease;
            object-fit: contain;
            touch-action: none;
            z-index: 500;
        }
        .draggable-object:active {
            cursor: grabbing;
        }
        .weight-slider {
            position: absolute;
            border: 3.5px solid #ff0000;
            background: transparent;
            cursor: pointer;
            z-index: 35;
            touch-action: none;
            box-sizing: border-box;
        }
        #ohaus-1-container {
            position: absolute;
            transition: transform 0.6s cubic-bezier(0.25, 0.1, 0.25, 1);
            pointer-events: none;
        }
        #ohaus-1-img {
            width: 100%;
            height: 100%;
        }
        
        .control-panel {
            position: fixed;
            top: 20px;
            left: 20px;
            background: rgba(255, 255, 255, 0.9);
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            z-index: 200;
            width: 250px;
            border-left: 5px solid #3b82f6;
        }

        .info-panel {
            position: fixed;
            top: 20px;
            right: 20px;
            background: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            z-index: 100;
            border-right: 5px solid #ef4444;
            min-width: 220px;
        }

        #bottom-layout {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: calc(100vh - 547px);
            background: #ffffff;
            border-top: 3px solid #374151;
            z-index: 100;
            display: flex;
            align-items: center; 
            padding: 10px 60px; 
            gap: 40px;
            box-sizing: border-box;
            justify-content: flex-end; 
        }

        .measurement-zone {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            gap: 15px;
            padding: 10px 0;
            max-width: 700px; 
            margin-right: 20px;
        }

        /* Layout Perpustakaan Objek */
        #object-library {
            position: absolute;
            left: 0;
            top: 226px;
            width: 271px;
            height: 512px; 
            background: #ffffff;
            border-right: 3px solid #374151;
            border-top: 3px solid #374151;
            z-index: 110;
            display: flex;
            flex-direction: column;
            box-sizing: border-box;
            overflow: hidden;
        }

        .library-header {
            background: #374151;
            color: white;
            padding: 8px;
            text-align: center;
            font-size: 12px;
            font-weight: bold;
            text-transform: uppercase;
        }

        #library-scroll-container {
            flex: 1;
            overflow-y: hidden;
            position: relative;
            padding: 15px 10px;
            display: flex;
            flex-direction: column;
            gap: 25px;
            align-items: center;
        }

        .library-item-slot {
            width: 110px;
            height: 110px;
            border: 2px dashed #d1d5db;
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
            flex-shrink: 0;
            background: #f9fafb;
        }

        .item-label {
            font-size: 10px;
            font-weight: bold;
            color: #4b5563;
            margin-top: 8px;
            text-align: center;
            position: absolute;
            bottom: -18px;
            white-space: nowrap;
        }

        .scroll-btn {
            background: #e5e7eb;
            border: none;
            padding: 8px;
            cursor: pointer;
            text-align: center;
            font-weight: bold;
            transition: background 0.2s;
            z-index: 10;
        }
        .scroll-btn:hover { background: #d1d5db; }

        .track-row {
            position: relative;
            height: 28px;
            width: 100%;
            background: #f3f4f6;
            border-radius: 6px;
            border: 1px solid #d1d5db;
        }

        .track-label {
            position: absolute;
            left: -125px; 
            width: 110px;
            font-size: 10px;
            font-weight: 800;
            color: #4b5563;
            text-align: right;
            top: 50%;
            transform: translateY(-50%);
        }

        .track-marks {
            position: absolute;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: space-between;
            padding: 0 10px;
            pointer-events: none;
            box-sizing: border-box;
        }

        .mark {
            height: 50%;
            width: 1.5px;
            background: #9ca3af;
            position: relative;
            top: 0;
        }
        .mark.major { height: 100%; background: #374151; width: 2px; }
        .mark.sub { height: 30%; width: 1px; background: #d1d5db; }

        .mark-text {
            position: absolute;
            bottom: -14px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 9px;
            font-weight: bold;
            color: #111827;
        }

        .bottom-slider-knob {
            position: absolute;
            top: -4px;
            width: 10px;
            height: 36px;
            background: #dc2626;
            cursor: pointer;
            border-radius: 4px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.3);
            z-index: 110;
            transform: translateX(-50%);
            border: 2px solid white;
        }

        .balance-visualizer {
            width: 180px;
            height: 130px;
            background: black;
            border-radius: 12px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: white;
            padding: 10px;
            border: 4px solid #4b5563;
            flex-shrink: 0; 
        }

        .indicator-area {
            position: relative;
            width: 100px;
            height: 70px;
            border-right: 3px solid #fbbf24;
            display: flex;
            align-items: center;
        }

        .indicator-needle {
            position: absolute;
            right: 0;
            width: 70px;
            height: 3px;
            background: #ef4444;
            transform-origin: left center;
            transition: transform 0.6s cubic-bezier(0.25, 0.1, 0.25, 1);
            box-shadow: 0 0 8px rgba(239, 68, 68, 0.5);
        }

        .zero-line {
            position: absolute;
            right: -10px;
            width: 20px;
            height: 2px;
            background: #fbbf24;
        }

        .balance-status-text {
            margin-top: 8px;
            font-size: 10px;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        #labeling-canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 150;
        }

        .part-label {
            position: absolute;
            background: rgba(0, 0, 0, 0.85);
            color: white;
            padding: 8px 12px;
            border-radius: 4px;
            font-size: 11px;
            max-width: 180px;
            transform: translate(-50%, -50%);
            z-index: 151;
            pointer-events: none;
            box-shadow: 0 2px 8px rgba(0,0,0,0.3);
            border: 1px solid #555;
        }

        .part-label b {
            display: block;
            color: #fbbf24;
            margin-bottom: 2px;
            text-transform: uppercase;
        }

        .watermark {
            position: absolute;
            color: #333;
            opacity: 0.35;
            font-weight: bold;
            font-size: 14px;
            pointer-events: none;
            white-space: nowrap;
        }

        #cal-knob-btn {
            position: absolute;
            z-index: 120;
            cursor: pointer;
            border: 2px solid transparent;
            background-color: transparent;
            transition: all 0.2s;
        }

        #manual-cal-layout {
            position: absolute;
            background: white;
            border: 2px solid #374151;
            padding: 10px;
            border-radius: 8px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
            z-index: 130;
            display: none;
            flex-direction: column;
            gap: 8px;
        }
        .cal-btn {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 6px 12px;
            background: #f3f4f6;
            border: 1px solid #d1d5db;
            border-radius: 4px;
            font-size: 12px;
            font-weight: bold;
            cursor: pointer;
            transition: background 0.2s;
        }
        .cal-btn:hover {
            background: #e5e7eb;
        }
        #close-cal-layout {
            position: absolute;
            top: -10px;
            right: -10px;
            width: 24px;
            height: 24px;
            background: #ef4444;
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: bold;
            cursor: pointer;
            border: 2px solid white;
        }

        #cal-warning {
            position: absolute;
            left: 390px;
            top: 295px;
            font-size: 12px;
            line-height: 1.4;
            font-weight: bold;
            color: white;
            pointer-events: none;
            opacity: 0;
            transition: opacity 1s ease-out;
            z-index: 150;
            max-width: 250px;
        }

        #ohaus-pan {
            position: absolute;
            pointer-events: none;
            object-fit: contain;
            z-index: 30;
        }
    </style>
</head>
<body>

    <div class="control-panel">
        <h3 class="font-bold text-sm mb-3 border-b pb-2">Simulation Features</h3>
        <div class="space-y-3">
            <label class="flex items-center cursor-pointer">
                <input type="checkbox" id="toggle-readout" checked class="mr-2">
                <span class="text-xs">Display Measurement</span>
            </label>
            <label class="flex items-center cursor-pointer">
                <input type="checkbox" id="toggle-indicator" checked class="mr-2">
                <span class="text-xs">Balance Indicator</span>
            </label>
            <label class="flex items-center cursor-pointer">
                <input type="checkbox" id="toggle-calibration" checked class="mr-2">
                <span class="text-xs">Auto Calibrate</span>
            </label>
            <label class="flex items-center cursor-pointer">
                <input type="checkbox" id="toggle-labels" class="mr-2">
                <span class="text-xs">Component Labeling</span>
            </label>
        </div>
    </div>

    <div id="info-panel" class="info-panel">
    	<h2 class="font-bold text-lg mb-1">Triple Beam Balance</h2>
    	<p class="text-[10px] text-gray-500 mb-2 uppercase tracking-wider">Mass Measurement Simulation</p>
    	<div id="status" class="font-mono text-[10px] font-bold text-red-600 bg-red-50 p-2 rounded border border-red-100 mb-2">Status: Ready</div>
   	<div id="readout" class="font-mono text-xs text-gray-700 space-y-1">
           <div class="flex justify-between"><span>Middle:</span> <span id="val-heavy">0</span><p>&nbsp;&nbsp;&nbsp;g</p></div>
           <div class="flex justify-between"><span>Rear:</span> <span id="val-medium">0</span> <p>&nbsp;g</p></div>
           <div class="flex justify-between border-b pb-1"><span>Front:</span> <span id="val-light">0.0</span> g</div>
           <div class="flex justify-between pt-1 font-bold text-red-600"><span>Total:</span> <span id="val-total">0.0</span>g</div>
    </div>
</div>


    <div id="simulation-container">
        <div class="watermark" style="left: 867px; top: 450px; z-index: 100;">Simulation Design: Adjie Rexa Tahara</div>
        <canvas id="labeling-canvas"></canvas>

        <img id="meja" class="static-asset" src="https://lh3.googleusercontent.com/d/1wiAxU5b9WyjsS0Y_6BuNkmrRNwC9y5N6" style="left:1px; top:357px; width:3076px; height:276px; z-index:5;">
        
        <img id="ohaus-2" class="static-asset" src="https://lh3.googleusercontent.com/d/1wXwKdtGMlg-Fwn7hoikIjulorUTZtnou" style="left:606px; top:163px; width:700px; height:425px; z-index:20;">

        <div id="ohaus-1-container" style="left:611px; top:235px; width:616px; height:120px; z-index:8;">
            <img id="ohaus-1-img" src="https://lh3.googleusercontent.com/d/1hbfSJOKu32SrlbKYXMJsMUoSOX-VM8-e">
        </div>

        <img id="ohaus-pan" src="https://lh3.googleusercontent.com/d/1XIA0pZdzNDXugIlAIcWXbd-7BAmJI5rM" style="left:492px; top:170px; width:400px; height:200px; z-index:30;">

        <div id="weight-light" class="weight-slider" style="width:17px; height:25px;" title="Front Beam Weight"></div>
        <div id="weight-medium" class="weight-slider" style="width:25px; height:25px;" title="Rear Beam Weight"></div>
        <div id="weight-heavy" class="weight-slider" style="width:40px; height:25px;" title="Middle Beam Weight"></div>

        <div id="cal-knob-btn" style="left:617px; top:289px; width:25px; height:25px;"></div>
        <div id="cal-warning">Manual calibration is disabled when<br>Auto Calibration is enabled.</div>

        <div id="manual-cal-layout" style="left:450px; top:270px;">
            <div id="close-cal-layout">X</div>
            <button class="cal-btn" id="cal-up"><span>↑</span> Rotate Up</button>
            <button class="cal-btn" id="cal-down"><span>↓</span> Rotate Down</button>
        </div>

        <!-- Layout Perpustakaan Objek -->
        <div id="object-library">
            <div class="library-header">Weight Object Library</div>
            <button class="scroll-btn" id="lib-scroll-up">▲</button>
            <div id="library-scroll-container">
                <div class="library-item-slot" id="slot-obj-dino">
                    <span class="item-label">Plastic Dinosaur Figurine</span>
                </div>
                <div class="library-item-slot" id="slot-obj-kayu">
                    <span class="item-label">Wooden Block</span>
                </div>
                <div class="library-item-slot" id="slot-obj-besi">
                    <span class="item-label">Steel Block</span>
                </div>
                <div class="library-item-slot" id="slot-obj-kelereng">
                    <span class="item-label">Glass Marble</span>
                </div>
                <div class="library-item-slot" id="slot-obj-baterai">
                    <span class="item-label">AA Battery</span>
                </div>
            </div>
            <button class="scroll-btn" id="lib-scroll-down">▼</button>
        </div>

        <!-- Objek-objek -->
        <img id="obj-dino" class="draggable-object" data-name="Plastic Dinosaur Figurine" src="https://lh3.googleusercontent.com/d/1ezBqnNpjh0RdUri2Sgi8qxIIS-7srXnQ" style="width:60px; height:auto;">
        <img id="obj-kayu" class="draggable-object" data-name="Wooden Block" src="https://lh3.googleusercontent.com/d/1_06RB2NamUbDIj5DsxgDHEJQ0mvk1BWO" style="width:60px; height:auto;">
        <img id="obj-besi" class="draggable-object" data-name="Steel Block" src="https://lh3.googleusercontent.com/d/1D-_gRhh4WLgyqozbocOGDyM-HsGu4eEd" style="width:60px; height:auto;">
        <img id="obj-kelereng" class="draggable-object" data-name="Glass Marble" src="https://lh3.googleusercontent.com/d/1tMz_BNKRsHAdmktF5mxvT22hjHJ09ZvR" style="width:40px; height:auto;">
        <img id="obj-baterai" class="draggable-object" data-name="AA Battery" src="https://lh3.googleusercontent.com/d/1H0ANkS2lUNLJ0qpp5EYk_QeLOD1y1Nga" style="width:50px; height:auto;">

        <div id="bottom-layout">
            <div class="measurement-zone">
                <div class="track-row" id="track-heavy">
                    <span class="track-label">Middle Beam Weight (gram)</span>
                    <div class="track-marks" id="marks-heavy"></div>
                    <div id="knob-heavy" class="bottom-slider-knob"></div>
                </div>
                <div class="track-row" id="track-medium">
                    <span class="track-label">Rear Beam Weight (gram)</span>
                    <div class="track-marks" id="marks-medium"></div>
                    <div id="knob-medium" class="bottom-slider-knob"></div>
                </div>
                <div class="track-row" id="track-light">
                    <span class="track-label">Front Beam Weight (gram)</span>
                    <div class="track-marks" id="marks-light"></div>
                    <div id="knob-light" class="bottom-slider-knob"></div>
                </div>
            </div>

            <div id="indicator-box" class="balance-visualizer">
                <span class="text-[9px] mb-2 uppercase opacity-100">Zero Point Indicator</span>
                <div class="indicator-area">
                    <div class="zero-line"></div>
                    <div id="visual-needle" class="indicator-needle"></div>
                </div>
                <div id="balance-text" class="balance-status-text text-yellow-400">Out of Balance</div>
            </div>
        </div>

        <div id="labels-container" style="display:none;">
            <div class="part-label" style="left:450px; top:100px;"><b>Pan</b>The platform where the object to be measured is placed.</div>
            <div class="part-label" style="left:1100px; top:100px;"><b>Beam</b>The arm that supports the sliding weights.</div>
            <div class="part-label" style="left:850px; top:100px;"><b>Sliding Weight</b>Moved along the beam to balance the mass of the object.</div>
            <div class="part-label" style="left:1390px; top:290px;"><b>Pointer</b>Indicates whether the balance is in equilibrium or not.</div>
            <div class="part-label" style="left:450px; top:300px;"><b>Calibration Knob</b>Used to adjust the pointer to the zero position before measurement.</div>
            <div class="part-label" style="left:1390px; top:430px;"><b>Base</b>Provides structural support and stability to the balance.</div>
        </div>
    </div>

    <script src="data/app.obf.js"></script>

</body>
</html>